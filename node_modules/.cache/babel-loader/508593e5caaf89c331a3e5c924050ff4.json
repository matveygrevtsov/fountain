{"ast":null,"code":"class FountainItem {\n  constructor(canvasRef, shotAngle, width, skinid) {\n    this.t = 0;\n    this.shotAngle = shotAngle;\n    this.width = width;\n    this.canvas = this.canvasRef.current;\n    this.context = this.canvas.getContext('2d');\n    this.x = this.canvas.width - width / 2;\n    this.y = this.canvas.height;\n    this.id = id;\n  }\n\n  incrementTime() {\n    this.t += animationSpeed * period / 1000;\n  }\n\n  move() {\n    this.incrementTime();\n    this.x = x_0 + power * this.t * Math.cos(this.shotAngle) - this.width / 2;\n    this.y = y_0 - power * this.t * Math.sin(this.shotAngle) + g * this.t * this.t / 2;\n\n    if (this.y > y_0 + 2 * this.width || this.y < -2 * this.width || this.x > this.canvas.width + 2 * this.width || this.x < -2 * this.width) {\n      this.resetParams();\n    }\n  }\n\n  resetParams() {\n    this.t = 0;\n    this.shotAngle = randomFromInterval(dispersion());\n    this.width = randomFromInterval(itemsSize);\n    this.x = this.canvas.width - this.width / 2;\n    this.y = this.canvas.height;\n  }\n\n  render() {\n    this.context.save();\n    this.context.translate(this.x + this.width / 2, this.y + this.width / 2);\n    this.context.rotate(this.t * rotationSpeed * (2 * (this.id % 2) - 1));\n    this.context.translate(-this.x - this.width / 2, -this.y - this.width / 2);\n    this.context.drawImage(imgSkins[this.id % imgSkins.length], this.x, this.y, this.width, this.width);\n    this.context.restore();\n    this.move();\n  }\n\n}\n\nclass FountainAnimator {\n  constructor(props) {\n    this.animationSpeed = props.animationSpeed;\n    this.power = props.power;\n    this.itemsNumber = props.itemsNumber;\n    this.spreadAngle = props.spreadAngle;\n    this.itemsSize = [props.minItemsSize, props.maxItemsSize];\n    this.g = props.gravity;\n    this.rotationSpeed = props.rotationSpeed;\n    this.canvas = props.canvasRef;\n    this.imgSkins = props.imgSkinsRefs;\n  }\n\n  setCanvasSize() {\n    this.canvas.current.width = window.innerWidth;\n    this.canvas.current.height = window.innerHeight;\n    this.x_0 = canvas.width / 2;\n    this.y_0 = canvas.height;\n  }\n\n  start() {\n    this.setCanvasSize();\n    window.addEventListener('resize', () => this.setCanvasSize());\n    /*\n    const canvas = document.createElement('canvas')\n    const context = canvas.getContext('2d')\n    this.canvas = canvas\n    this.context = context\n    this.rootEl.appendChild(canvas)\n    */\n  }\n\n}\n\nexport default FountainAnimator;","map":{"version":3,"sources":["/home/alex/projects/test_ts_app/src/fountain.js"],"names":["FountainItem","constructor","canvasRef","shotAngle","width","skinid","t","canvas","current","context","getContext","x","y","height","id","incrementTime","animationSpeed","period","move","x_0","power","Math","cos","y_0","sin","g","resetParams","randomFromInterval","dispersion","itemsSize","render","save","translate","rotate","rotationSpeed","drawImage","imgSkins","length","restore","FountainAnimator","props","itemsNumber","spreadAngle","minItemsSize","maxItemsSize","gravity","imgSkinsRefs","setCanvasSize","window","innerWidth","innerHeight","start","addEventListener"],"mappings":"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","sourcesContent":["class FountainItem {\n  constructor(canvasRef, shotAngle, width, skinid) {\n    this.t = 0\n    this.shotAngle = shotAngle\n    this.width = width\n    this.canvas = this.canvasRef.current\n    this.context = this.canvas.getContext('2d')\n    this.x = this.canvas.width - width / 2\n    this.y = this.canvas.height\n    this.id = id\n  }\n\n  incrementTime() {\n    this.t += (animationSpeed * period) / 1000\n  }\n\n  move() {\n    this.incrementTime()\n    this.x = x_0 + power * this.t * Math.cos(this.shotAngle) - this.width / 2\n    this.y =\n      y_0 -\n      power * this.t * Math.sin(this.shotAngle) +\n      (g * this.t * this.t) / 2\n    if (\n      this.y > y_0 + 2 * this.width ||\n      this.y < -2 * this.width ||\n      this.x > this.canvas.width + 2 * this.width ||\n      this.x < -2 * this.width\n    ) {\n      this.resetParams()\n    }\n  }\n\n  resetParams() {\n    this.t = 0\n    this.shotAngle = randomFromInterval(dispersion())\n    this.width = randomFromInterval(itemsSize)\n    this.x = this.canvas.width - this.width / 2\n    this.y = this.canvas.height\n  }\n\n  render() {\n    this.context.save()\n    this.context.translate(this.x + this.width / 2, this.y + this.width / 2)\n    this.context.rotate(this.t * rotationSpeed * (2 * (this.id % 2) - 1))\n    this.context.translate(-this.x - this.width / 2, -this.y - this.width / 2)\n    this.context.drawImage(\n      imgSkins[this.id % imgSkins.length],\n      this.x,\n      this.y,\n      this.width,\n      this.width,\n    )\n    this.context.restore()\n    this.move()\n  }\n}\n\nclass FountainAnimator {\n  constructor(props) {\n    this.animationSpeed = props.animationSpeed\n    this.power = props.power\n    this.itemsNumber = props.itemsNumber\n    this.spreadAngle = props.spreadAngle\n    this.itemsSize = [props.minItemsSize, props.maxItemsSize]\n    this.g = props.gravity\n    this.rotationSpeed = props.rotationSpeed\n    this.canvas = props.canvasRef\n    this.imgSkins = props.imgSkinsRefs\n  }\n\n  setCanvasSize() {\n    this.canvas.current.width = window.innerWidth\n    this.canvas.current.height = window.innerHeight\n    this.x_0 = canvas.width / 2\n    this.y_0 = canvas.height\n  }\n\n  start() {\n    this.setCanvasSize()\n    window.addEventListener('resize', () => this.setCanvasSize())\n\n    /*\n    const canvas = document.createElement('canvas')\n    const context = canvas.getContext('2d')\n    this.canvas = canvas\n    this.context = context\n    this.rootEl.appendChild(canvas)\n    */\n  }\n}\n\nexport default FountainAnimator\n"]},"metadata":{},"sourceType":"module"}