{"ast":null,"code":"const randomFromInterval = interval => Math.random() * (interval[1] - interval[0]) + interval[0];\n\nconst dispersion = () => [Math.PI * (180 - spreadAngle) / 360, Math.PI * (180 + spreadAngle) / 360];\n\nclass FountainItem {\n  constructor(props) {\n    this.animationSpeed = props.animationSpeed;\n    this.power = props.power;\n    this.rotationSpeed = props.rotationSpeed;\n    this.canvas = props.canvasRef.current;\n    this.context = this.canvas.getContext('2d');\n    this.id = props.id;\n    this.shotAngle = props.shotAngle;\n    this.skin = props.skin;\n  }\n\n  incrementTime() {\n    this.t += animationSpeed * period / 1000;\n  }\n\n  move() {\n    this.incrementTime();\n    this.x = x_0 + power * this.t * Math.cos(this.shotAngle) - this.width / 2;\n    this.y = y_0 - power * this.t * Math.sin(this.shotAngle) + g * this.t * this.t / 2;\n\n    if (this.y > y_0 + 2 * this.width || this.y < -2 * this.width || this.x > this.canvas.width + 2 * this.width || this.x < -2 * this.width) {\n      this.resetParams();\n    }\n  }\n\n  setParams() {\n    this.t = 0;\n    this.shotAngle = randomFromInterval(dispersion());\n    this.width = randomFromInterval(itemsSize);\n    this.x = this.canvas.width - this.width / 2;\n    this.y = this.canvas.height;\n  }\n\n  render() {\n    this.context.save();\n    this.context.translate(this.x + this.width / 2, this.y + this.width / 2);\n    this.context.rotate(this.t * rotationSpeed * (2 * (this.id % 2) - 1));\n    this.context.translate(-this.x - this.width / 2, -this.y - this.width / 2);\n    this.context.drawImage(skin, this.x, this.y, this.width, this.width);\n    this.context.restore();\n    this.move();\n  }\n\n}\n\nclass FountainAnimator {\n  constructor(props) {\n    this.animationSpeed = props.animationSpeed;\n    this.power = props.power;\n    this.itemsNumber = props.itemsNumber;\n    this.spreadAngle = props.spreadAngle;\n    this.itemsSize = [props.minItemsSize, props.maxItemsSize];\n    this.g = props.gravity;\n    this.rotationSpeed = props.rotationSpeed;\n    this.canvas = props.canvasRef;\n    this.imgSkins = props.imgSkinsRefs; //this.setCanvasSize()\n    //window.addEventListener('resize', () => this.setCanvasSize())\n  }\n\n  setCanvasSize() {\n    this.canvas.current.width = window.innerWidth;\n    this.canvas.current.height = window.innerHeight;\n    this.x_0 = canvas.width / 2;\n    this.y_0 = canvas.height;\n  }\n\n  start() {\n    console.log('I`m rady !');\n  }\n\n}\n\nexport default FountainAnimator;","map":{"version":3,"sources":["/home/alex/projects/test_ts_app/src/fountain.js"],"names":["randomFromInterval","interval","Math","random","dispersion","PI","spreadAngle","FountainItem","constructor","props","animationSpeed","power","rotationSpeed","canvas","canvasRef","current","context","getContext","id","shotAngle","skin","incrementTime","t","period","move","x","x_0","cos","width","y","y_0","sin","g","resetParams","setParams","itemsSize","height","render","save","translate","rotate","drawImage","restore","FountainAnimator","itemsNumber","minItemsSize","maxItemsSize","gravity","imgSkins","imgSkinsRefs","setCanvasSize","window","innerWidth","innerHeight","start","console","log"],"mappings":"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","sourcesContent":["const randomFromInterval = (interval) =>\n  Math.random() * (interval[1] - interval[0]) + interval[0]\n\nconst dispersion = () => [\n  (Math.PI * (180 - spreadAngle)) / 360,\n  (Math.PI * (180 + spreadAngle)) / 360,\n]\n\nclass FountainItem {\n  constructor(props) {\n    this.animationSpeed = props.animationSpeed\n    this.power = props.power\n\n\n    \n    this.rotationSpeed = props.rotationSpeed\n    this.canvas = props.canvasRef.current\n    this.context = this.canvas.getContext('2d')\n    this.id = props.id\n    this.shotAngle = props.shotAngle\n \n    this.skin = props.skin\n\n  }\n\n  incrementTime() {\n    this.t += (animationSpeed * period) / 1000\n  }\n\n  move() {\n    this.incrementTime()\n    this.x = x_0 + power * this.t * Math.cos(this.shotAngle) - this.width / 2\n    this.y =\n      y_0 -\n      power * this.t * Math.sin(this.shotAngle) +\n      (g * this.t * this.t) / 2\n    if (\n      this.y > y_0 + 2 * this.width ||\n      this.y < -2 * this.width ||\n      this.x > this.canvas.width + 2 * this.width ||\n      this.x < -2 * this.width\n    ) {\n      this.resetParams()\n    }\n  }\n\n  setParams() {\n    this.t = 0\n    this.shotAngle = randomFromInterval(dispersion())\n    this.width = randomFromInterval(itemsSize)\n    this.x = this.canvas.width - this.width / 2\n    this.y = this.canvas.height\n  }\n\n  render() {\n    this.context.save()\n    this.context.translate(this.x + this.width / 2, this.y + this.width / 2)\n    this.context.rotate(this.t * rotationSpeed * (2 * (this.id % 2) - 1))\n    this.context.translate(-this.x - this.width / 2, -this.y - this.width / 2)\n    this.context.drawImage(skin, this.x, this.y, this.width, this.width)\n    this.context.restore()\n    this.move()\n  }\n}\n\nclass FountainAnimator {\n  constructor(props) {\n    this.animationSpeed = props.animationSpeed\n    this.power = props.power\n    this.itemsNumber = props.itemsNumber\n    this.spreadAngle = props.spreadAngle\n    this.itemsSize = [props.minItemsSize, props.maxItemsSize]\n    this.g = props.gravity\n    this.rotationSpeed = props.rotationSpeed\n    this.canvas = props.canvasRef\n    this.imgSkins = props.imgSkinsRefs\n    //this.setCanvasSize()\n    //window.addEventListener('resize', () => this.setCanvasSize())\n  }\n\n  setCanvasSize() {\n    this.canvas.current.width = window.innerWidth\n    this.canvas.current.height = window.innerHeight\n    this.x_0 = canvas.width / 2\n    this.y_0 = canvas.height\n  }\n\n  start() {\n    console.log('I`m rady !')\n  }\n}\n\nexport default FountainAnimator\n"]},"metadata":{},"sourceType":"module"}