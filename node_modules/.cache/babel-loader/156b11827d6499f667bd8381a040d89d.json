{"ast":null,"code":"const randomFromInterval = interval => Math.random() * (interval[1] - interval[0]) + interval[0];\n\nconst dispersion = spreadAngle => [Math.PI * (180 - spreadAngle) / 360, Math.PI * (180 + spreadAngle) / 360];\n/*\n\nclass FountainItem {\n  constructor(props) {\n    this.animationSpeed = props.animationSpeed\n    this.power = props.power\n    this.g = props.gravity\n    this.rotationSpeed = props.rotationSpeed\n    this.canvas = props.canvasRef.current\n    this.context = this.canvas.getContext('2d')\n    this.id = props.id\n    this.skin = props.skin\n    this.period = 60 // подумать\n    this.setParams()\n  }\n\n  incrementTime() {\n    this.t += (this.animationSpeed * this.period) / 1000\n  }\n\n  move() {\n    this.incrementTime()\n    this.x = x_0 + power * this.t * Math.cos(this.shotAngle) - this.width / 2\n    this.y =\n      y_0 -\n      power * this.t * Math.sin(this.shotAngle) +\n      (g * this.t * this.t) / 2\n    if (\n      this.y > y_0 + 2 * this.width ||\n      this.y < -2 * this.width ||\n      this.x > this.canvas.width + 2 * this.width ||\n      this.x < -2 * this.width\n    ) {\n      this.resetParams()\n    }\n  }\n\n  setParams() {\n    this.t = 0\n    this.shotAngle = randomFromInterval(dispersion())\n    this.width = randomFromInterval(itemsSize)\n    this.x = this.canvas.width - this.width / 2\n    this.y = this.canvas.height\n  }\n\n  render() {\n    this.context.save()\n    this.context.translate(this.x + this.width / 2, this.y + this.width / 2)\n    this.context.rotate(this.t * rotationSpeed * (2 * (this.id % 2) - 1))\n    this.context.translate(-this.x - this.width / 2, -this.y - this.width / 2)\n    this.context.drawImage(skin, this.x, this.y, this.width, this.width)\n    this.context.restore()\n    this.move()\n  }\n}*/\n\n\nclass FountainItem {\n  constructor(props) {\n    this.animationSpeed = props.animationSpeed;\n    this.power = props.power;\n    this.g = props.gravity;\n    this.rotationSpeed = props.rotationSpeed;\n    this.canvas = props.canvasRef;\n    this.context = this.canvas.getContext('2d');\n    this.spreadAngle = props.spreadAngle;\n    this.itemsSize = [props.minItemsSize, props.maxItemsSize];\n    this.period = 60; // подумать\n\n    this.setBasis();\n    this.setParams();\n    window.addEventListener('resize', () => this.setBasis());\n  }\n\n  setBasis() {\n    this.x_0 = this.canvas.width / 2;\n    this.y_0 = this.canvas.height;\n  }\n\n  setParams() {\n    this.t = 0;\n    this.shotAngle = randomFromInterval(dispersion(this.spreadAngle));\n    this.width = randomFromInterval(this.itemsSize);\n    this.x = this.x_0 - this.width / 2;\n    this.y = this.y_0;\n  }\n\n  incrementTime() {\n    this.t += this.animationSpeed * this.period / 1000;\n  }\n\n  move() {\n    this.incrementTime();\n    this.x = x_0 + power * this.t * Math.cos(this.shotAngle) - this.width / 2;\n    this.y = y_0 - power * this.t * Math.sin(this.shotAngle) + g * this.t * this.t / 2;\n\n    if (this.y > y_0 + 2 * this.width || this.y < -2 * this.width || this.x > this.canvas.width + 2 * this.width || this.x < -2 * this.width) {\n      this.resetParams();\n    }\n  }\n\n}\n\nclass FountainAnimator {\n  constructor(props) {\n    this.state = props;\n    this.canvas = props.canvasRef;\n    /*\n    this.congif = {\n      animationSpeed: props.animationSpeed,\n      power: props.power,\n      itemsNumber: props.itemsNumber,\n      spreadAngle: props.spreadAngle,\n      itemsSize: [props.minItemsSize, props.maxItemsSize],\n      g: props.gravity,\n      rotationSpeed: props.rotationSpeed,\n      canvas:  props.canvasRef.current,\n      context: props.canvasRef.current.getContext('2d'),\n    }\n    this.imgSkins = props.imgSkinsRefs*/\n\n    this.setCanvasSize();\n    window.addEventListener('resize', () => this.setCanvasSize());\n  }\n\n  setCanvasSize() {\n    this.canvas.current.width = window.innerWidth;\n    this.canvas.current.height = window.innerHeight;\n  }\n\n  start() {\n    //const el = new FountainItem(this.congif)\n    console.log('I`m ready !');\n  }\n\n}\n\nexport default FountainAnimator;","map":{"version":3,"sources":["/home/alex/projects/test_ts_app/src/fountain.js"],"names":["randomFromInterval","interval","Math","random","dispersion","spreadAngle","PI","FountainItem","constructor","props","animationSpeed","power","g","gravity","rotationSpeed","canvas","canvasRef","context","getContext","itemsSize","minItemsSize","maxItemsSize","period","setBasis","setParams","window","addEventListener","x_0","width","y_0","height","t","shotAngle","x","y","incrementTime","move","cos","sin","resetParams","FountainAnimator","state","setCanvasSize","current","innerWidth","innerHeight","start","console","log"],"mappings":"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","sourcesContent":["const randomFromInterval = (interval) =>\n  Math.random() * (interval[1] - interval[0]) + interval[0]\n\nconst dispersion = (spreadAngle) => [\n  (Math.PI * (180 - spreadAngle)) / 360,\n  (Math.PI * (180 + spreadAngle)) / 360,\n]\n\n/*\n\nclass FountainItem {\n  constructor(props) {\n    this.animationSpeed = props.animationSpeed\n    this.power = props.power\n    this.g = props.gravity\n    this.rotationSpeed = props.rotationSpeed\n    this.canvas = props.canvasRef.current\n    this.context = this.canvas.getContext('2d')\n    this.id = props.id\n    this.skin = props.skin\n    this.period = 60 // подумать\n    this.setParams()\n  }\n\n  incrementTime() {\n    this.t += (this.animationSpeed * this.period) / 1000\n  }\n\n  move() {\n    this.incrementTime()\n    this.x = x_0 + power * this.t * Math.cos(this.shotAngle) - this.width / 2\n    this.y =\n      y_0 -\n      power * this.t * Math.sin(this.shotAngle) +\n      (g * this.t * this.t) / 2\n    if (\n      this.y > y_0 + 2 * this.width ||\n      this.y < -2 * this.width ||\n      this.x > this.canvas.width + 2 * this.width ||\n      this.x < -2 * this.width\n    ) {\n      this.resetParams()\n    }\n  }\n\n  setParams() {\n    this.t = 0\n    this.shotAngle = randomFromInterval(dispersion())\n    this.width = randomFromInterval(itemsSize)\n    this.x = this.canvas.width - this.width / 2\n    this.y = this.canvas.height\n  }\n\n  render() {\n    this.context.save()\n    this.context.translate(this.x + this.width / 2, this.y + this.width / 2)\n    this.context.rotate(this.t * rotationSpeed * (2 * (this.id % 2) - 1))\n    this.context.translate(-this.x - this.width / 2, -this.y - this.width / 2)\n    this.context.drawImage(skin, this.x, this.y, this.width, this.width)\n    this.context.restore()\n    this.move()\n  }\n}*/\n\nclass FountainItem {\n  constructor(props) {\n    this.animationSpeed = props.animationSpeed\n    this.power = props.power\n    this.g = props.gravity\n    this.rotationSpeed = props.rotationSpeed\n    this.canvas = props.canvasRef\n    this.context = this.canvas.getContext('2d')\n    this.spreadAngle = props.spreadAngle\n    this.itemsSize = [props.minItemsSize, props.maxItemsSize]\n    this.period = 60 // подумать\n    this.setBasis()\n    this.setParams()\n    window.addEventListener('resize', () => this.setBasis())\n  }\n\n  setBasis() {\n    this.x_0 = this.canvas.width / 2\n    this.y_0 = this.canvas.height\n  }\n\n  setParams() {\n    this.t = 0\n    this.shotAngle = randomFromInterval(dispersion(this.spreadAngle))\n    this.width = randomFromInterval(this.itemsSize)\n    this.x = this.x_0 - this.width / 2\n    this.y = this.y_0\n  }\n\n  incrementTime() {\n    this.t += (this.animationSpeed * this.period) / 1000\n  }\n\n  move() {\n    this.incrementTime()\n    this.x = x_0 + power * this.t * Math.cos(this.shotAngle) - this.width / 2\n    this.y =\n      y_0 -\n      power * this.t * Math.sin(this.shotAngle) +\n      (g * this.t * this.t) / 2\n    if (\n      this.y > y_0 + 2 * this.width ||\n      this.y < -2 * this.width ||\n      this.x > this.canvas.width + 2 * this.width ||\n      this.x < -2 * this.width\n    ) {\n      this.resetParams()\n    }\n  }\n}\n\nclass FountainAnimator {\n  constructor(props) {\n    this.state = props\n    this.canvas = props.canvasRef\n    /*\n    this.congif = {\n      animationSpeed: props.animationSpeed,\n      power: props.power,\n      itemsNumber: props.itemsNumber,\n      spreadAngle: props.spreadAngle,\n      itemsSize: [props.minItemsSize, props.maxItemsSize],\n      g: props.gravity,\n      rotationSpeed: props.rotationSpeed,\n      canvas:  props.canvasRef.current,\n      context: props.canvasRef.current.getContext('2d'),\n    }\n    this.imgSkins = props.imgSkinsRefs*/\n    this.setCanvasSize()\n    window.addEventListener('resize', () => this.setCanvasSize())\n  }\n\n  setCanvasSize() {\n    this.canvas.current.width = window.innerWidth\n    this.canvas.current.height = window.innerHeight\n  }\n\n  start() {\n    //const el = new FountainItem(this.congif)\n    console.log('I`m ready !')\n  }\n}\n\nexport default FountainAnimator\n"]},"metadata":{},"sourceType":"module"}